<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" th:replace="~{/admin/fragments/layout::layout('资源管理器', ~{::body})}">
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-10">
                <legend style="color: #222; text-shadow: 0px 1px 1px #555;">资源管理器</legend>
                <div class="Huialert Huialert-info" style="color: #222; text-shadow: 0px 1px 1px #555; margin-bottom: 5px;">
                    <span th:text="|当前路径：${currentDir}|"></span>
                </div>
                <div>
                    <a class="btn btn-success-outline size-MINI radius" th:href="|@{/admin/explorer/}${up}|" data-toggle="tooltip" data-placement="right" title="返回上层">
                        <i class="Hui-iconfont">&#xe679;</i>
                    </a>
                </div>
                <table class="table table-bg table-border table-striped table-hover radius" style="color: #222; text-shadow: 0px 1px 1px #555;">
                    <thead>
                        <th>文件名</th>
                        <th>操作</th>
                    </thead>
                    <tr th:each="dir : ${dirlist}">
                        <td><i class="Hui-iconfont">&#xe639;</i><a th:href="@{|/admin/explorer/${util.relative(dir)}|}" th:text="${dir.getFileName()}"></a></td>
                        <td><a href="javascript:;" onclick="del(this)" th:attr="data-path=${util.relative(dir)}">删除</a></td>
                    </tr>
                    <tr th:each="file: ${filelist}">
                        <td><i class="Hui-iconfont">&#xe63e;</i><a href="javascript:;" onclick="edit(this)" th:text="${file.getFileName()}" th:attr="data-path=${util.relative(file)}"></a></td>
                        <td><a href="javascript:;" onclick="del(this)" th:attr="data-path=${util.relative(file)}">删除</a></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        function edit(obj) {
            layer_show('文件打开器', '[[@{/admin/file/}]]' + $(obj).attr('data-path'), 900, 800);
        }
        function del(obj) {
            layer_show('删除资源', '[[@{/admin/del/}]]' + $(obj).attr('data-path'));
        }
    </script>
</body>
</html>